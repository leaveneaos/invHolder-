<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>开票通</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <!--<link rel="stylesheet" type="text/css" href="css/dianzifapiao.css">-->
    <script>
        window.onresize = function () {
            document.getElementsByTagName('html')[0].style.fontSize = (window.document.documentElement.getBoundingClientRect().width / 750 * 100) + 'px';
        }
        document.getElementsByTagName('html')[0].style.fontSize = (window.document.documentElement.getBoundingClientRect().width / 750 * 100) + 'px';

    </script>
    <style>
        body, html {
            background: white;
        }

        header {
            height: 68px;
            line-height: 68px;
            text-align: center;
            margin-bottom: 4px;
            background-color: #01906d;
            /*box-shadow: 0px 0.05rem 0.17rem 0px rgba(25, 101, 82, 0.49);*/
        }



        header img {
            width: 234px;
            height: 26px;
            margin-left: 0 !important;
        }
        footer {
            width: 100%;
            height: 0.75rem;
            font-family: SimHei;
            font-size: 0.28rem;
            color: #333333;
            display: flex;
            justify-content: space-between;
            padding: 0.1rem 0.74rem;
        }

        .content {
            width: 6.61rem;
            margin: 0 auto;
            margin-top: 0.36rem;
            box-shadow: 0px 0.06rem 0.27rem 0.07rem rgba(193, 193, 193, 0.47);
            border-radius: 0.1rem;
            border-bottom-right-radius: 0.1rem;
            border-bottom-left-radius: 0.1rem;
            -webkit-border-bottom-right-radius: 0.1rem;
            -webkit-border-bottom-left-radius: 0.1rem;
            padding-bottom: 0.1rem;
        }

        .content img {
            width: 6.61rem;
            height: 4.5rem;
            display: block;
        }

        .content ul {
            width: 6.61rem;
            padding-top: 0.76rem;
            /*background: #F4F4F4;*/
        }

        .content ul li {
            display: flex;

        }

        .content ul .title {
            color: #333333;
            font-size: 0.3rem;
        }

        .money {
            height: 2.87rem;
            /*background: #F4F4F4;*/
        }

        .money .txt {
            font-family: SimHei;
            font-size: 0.36rem;
            font-weight: normal;
            font-stretch: normal;
            line-height: 0px;
            letter-spacing: 0px;
            color: #333333;
            text-align: center;
            padding-top: 0.53rem;
            margin-bottom: 0.66rem;
        }

        .money .btn {
            width: 5rem;
            height: 0.88rem;
            background: #22c774;
        linear-gradient(#f5f4ed, #f5f4ed);
            background-blend-mode: normal,
            normal;
            border-radius: 0.44rem;
            color: #ffffff;
            text-align: center;
            line-height: 0.88rem;
            font-size: 0.35rem;
            margin: 0 auto;
        }

        .item0 {
            justify-content: center;
            padding: 0 0.8rem;
        }

        .item0 input {
            width: 100%;
            height: 0.66rem;
            box-shadow: inset 0px 3px 7px 0px rgba(0, 0, 0, 0.35);
            border-width: 0;
            font-family: SourceHanSansCN-Medium;
            font-size: 0.18rem;
            font-weight: normal;
            font-stretch: normal;
            text-indent: 0.15rem;
            line-height: 0.66rem;
            background: #F4F4F4;
            letter-spacing: 0px;
            color: #999999;
        }

        .item0 input::placeholder {
            width: 5rem;
            height: 0.66rem;
            background: #F4F4F4;
            box-shadow: inset 0px 3px 7px 0px rgba(0, 0, 0, 0.35);
            border-width: 0;
            font-family: SourceHanSansCN-Medium;
            font-size: 0.18rem;
            text-indent: 0.15rem;
            font-weight: normal;
            font-stretch: normal;
            line-height: 0.66rem;
            letter-spacing: 0px;
            color: #999999;

        }

        .item1 {
            justify-content: space-between;
        }

        .item1 input {
            width: 2.5rem;
            height: 0.66rem;
            box-shadow: inset 0px 3px 7px 0px rgba(0, 0, 0, 0.35);
            border-width: 0;
            text-indent: 0.15rem;
            font-family: SourceHanSansCN-Medium;
            font-size: 0.18rem;
            font-weight: normal;
            font-stretch: normal;
            line-height: 0.66rem;
            letter-spacing: 0px;
            color: #999999;
            background: #F4F4F4;
        }

        .item1 {
            padding: 0 0.8rem;
            margin-top: 0.27rem;
        }

        .item1 input::placeholder {
            width: 2.5rem;
            height: 0.66rem;
            box-shadow: inset 0px 3px 7px 0px rgba(0, 0, 0, 0.35);
            border-width: 0;
            text-indent: 0.15rem;
            font-family: SourceHanSansCN-Medium;
            font-size: 0.18rem;
            font-weight: normal;
            font-stretch: normal;
            line-height: 0.66rem;
            letter-spacing: 0px;
            color: #999999;
            background: #F4F4F4;

        }

        .item1 img {
            width: 2.16rem;
            height: 0.66rem;
        }

        .shadow2 {
            width: 6.31rem;
            margin: 0 auto;
            background-color: #fff;
            height: 0.2rem;
            opacity: 0.8;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        .shadow1 {
            width: 6.11rem;
            margin: 0 auto;
            background-color: #fff;
            height: 0.18rem;
            opacity: 0.6;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
        }

        html, body {
            height: 100%;
            background-color: #efc78d;
            display: none;
        }
        #advert{
            width: 100%;
            height: 135px;
            display: block;
        }
        #sure{
            border-radius: 5px;
            border-radius: 5px;
            margin-top: 22px;
            height: 44px;
            line-height: 44px;
        }
    </style>
</head>
<body onload="load()">
<header>
    <img id="logo" src="logo/fujifilm.png">
</header>
<img id="advert" src="logo/fujifilm_advert.png">
<div class="content">
    <ul>
        <li class="item0">
            <input id="tqm" placeholder="请输入提取码" type="text"/>
        </li>
        <li class="item1">
            <input id="code" placeholder="请输入右侧的验证码" type="text"/>
            <img src="../image.jsp" name="randImage" class="data-yzm" id="randImage" onclick="loadimage()"/>
        </li>
    </ul>
    <div class="money">
        <div class="txt"></div>
        <div id="sure" class="btn" onclick="sure()">提交</div>
    </div>
</div>
<div class="shadow2 hide">&nbsp;</div>
<div class="shadow1 hide">&nbsp;</div>
<footer><span>泰易开票通云服务平台</span><span>遇到问题？</span></footer>


<script src="../js/jquery.min.js"></script>
<script type="text/javascript">
    function redirect(errorMsg) {
        var myurl = "../QR/error.html?msg=" + new Date().getTime() + "=" + errorMsg;
        window.location.assign(encodeURI(myurl));
    }

    $(function () {
        var thisURL = document.URL;
        var getval = thisURL.split('?')[1];
        ppdm = getval.split("=")[2];
        $.post(
            "../kptService/getShowMsg",
            {
                "ppdm":ppdm
            },
            function (obj) {
                if (obj.code == "1") {
                    var data = eval("(" + obj.data + ")");
                    var head = data.headcolor;
                    var body = data.bodycolor;
                    var button = data.buttoncolor;
                    if (head != "no" && body!="no" &&button!="no") {
                        $("body").css("background-color", body+"");
                        $("header").css("background-color", head+"");
                        $("#sure").css("background-color", button+"");
                    }
                } else {
                    redirect(obj.msg)
                }
            }
        )
        $("#logo").attr("src", "logo/" + ppdm + ".png");
        $("#advert").attr("src", "logo/" + ppdm + "_advert.png");
        $("html,body").css("display", "block");
    })

    function sure() {
        var tqm = $('#tqm').val();
        var code = $('#code').val();
        if(tqm == null||tqm==""){
            alert("提取码不能为空");
            return;
        }
        if(code== null||code==""){
            alert("验证码不能为空");
            return;
        }
        $.post(
            "../kptService/lrqr",
            {
                "tq":tqm,
                "code":code
            },
            function (obj) {
                if (obj.code == "1") {
                    window.location.assign(encodeURI(obj.data.url));
                } else {
                    redirect(obj.msg);
                }
            })
    }

    function loadimage() {
        document.getElementById("randImage").src = "../image.jsp?" + Math.random();
    }
    function load() {
        document.getElementById("randImage").src = "../image.jsp?" + Math.random();
        $('#code').val('');
    }
</script>
</body>
</html>
